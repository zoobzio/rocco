---
title: Errors Reference
description: Complete reference for error types and details
author: zoobzio
published: 2025-12-16
updated: 2025-12-16
tags:
  - Reference
  - Errors
---

# Errors Reference

Complete reference for rocco error types and detail structures.

## Error Interface

### ErrorDefinition

```go
type ErrorDefinition interface {
    error
    Code() string
    Status() int
    Message() string
    DetailsAny() any
    DetailsMeta() sentinel.ModelMetadata
}
```

| Method | Description |
|--------|-------------|
| `Error()` | Returns error message (implements error interface) |
| `Code()` | Returns error code (e.g., "NOT_FOUND") |
| `Status()` | Returns HTTP status code |
| `Message()` | Returns human-readable message |
| `DetailsAny()` | Returns details as any type |
| `DetailsMeta()` | Returns sentinel metadata for OpenAPI schema generation |

## Creating Custom Errors

### NewError

```go
func NewError[D any](code string, status int, message string) *Error[D]
```

Creates a new error type with typed details.

| Parameter | Type | Description |
|-----------|------|-------------|
| `D` | type parameter | Details type |
| `code` | `string` | Error code (e.g., "TEAPOT") |
| `status` | `int` | HTTP status code |
| `message` | `string` | Default message |

### Example

```go
type TeapotDetails struct {
    TeaType string `json:"tea_type" description:"Type of tea"`
}

var ErrTeapot = rocco.NewError[TeapotDetails]("TEAPOT", 418, "I'm a teapot")

// Usage
return Output{}, ErrTeapot.WithDetails(TeapotDetails{TeaType: "Earl Grey"})
```

## Built-in Errors

### ErrBadRequest

```go
var ErrBadRequest = NewError[BadRequestDetails]("BAD_REQUEST", 400, "bad request")
```

**Status**: 400 Bad Request

**Details**:
```go
type BadRequestDetails struct {
    Reason string `json:"reason,omitempty" description:"Reason for bad request"`
}
```

### ErrUnauthorized

```go
var ErrUnauthorized = NewError[UnauthorizedDetails]("UNAUTHORIZED", 401, "unauthorized")
```

**Status**: 401 Unauthorized

**Details**:
```go
type UnauthorizedDetails struct {
    Reason string `json:"reason,omitempty" description:"Reason for unauthorized"`
}
```

### ErrForbidden

```go
var ErrForbidden = NewError[ForbiddenDetails]("FORBIDDEN", 403, "forbidden")
```

**Status**: 403 Forbidden

**Details**:
```go
type ForbiddenDetails struct {
    Reason string `json:"reason,omitempty" description:"Reason for forbidden"`
}
```

### ErrNotFound

```go
var ErrNotFound = NewError[NotFoundDetails]("NOT_FOUND", 404, "not found")
```

**Status**: 404 Not Found

**Details**:
```go
type NotFoundDetails struct {
    Resource string `json:"resource,omitempty" description:"Resource type that was not found"`
}
```

### ErrConflict

```go
var ErrConflict = NewError[ConflictDetails]("CONFLICT", 409, "conflict")
```

**Status**: 409 Conflict

**Details**:
```go
type ConflictDetails struct {
    Reason string `json:"reason,omitempty" description:"What caused the conflict"`
}
```

### ErrPayloadTooLarge

```go
var ErrPayloadTooLarge = NewError[PayloadTooLargeDetails]("PAYLOAD_TOO_LARGE", 413, "payload too large")
```

**Status**: 413 Payload Too Large

**Details**:
```go
type PayloadTooLargeDetails struct {
    MaxSize int64 `json:"max_size,omitempty" description:"Maximum allowed payload size in bytes"`
}
```

### ErrUnprocessableEntity

```go
var ErrUnprocessableEntity = NewError[UnprocessableEntityDetails]("UNPROCESSABLE_ENTITY", 422, "unprocessable entity")
```

**Status**: 422 Unprocessable Entity

**Details**:
```go
type UnprocessableEntityDetails struct {
    Reason string `json:"reason,omitempty" description:"Reason entity is unprocessable"`
}
```

### ErrValidationFailed

```go
var ErrValidationFailed = NewError[ValidationDetails]("VALIDATION_FAILED", 422, "validation failed")
```

**Status**: 422 Unprocessable Entity

**Details**:
```go
type ValidationDetails struct {
    Fields []ValidationFieldError `json:"fields" description:"List of field validation errors"`
}

type ValidationFieldError struct {
    Field string `json:"field" description:"Field name that failed validation"`
    Tag   string `json:"tag" description:"Validation tag that failed"`
    Value string `json:"value" description:"Value that failed validation"`
}
```

### ErrTooManyRequests

```go
var ErrTooManyRequests = NewError[TooManyRequestsDetails]("TOO_MANY_REQUESTS", 429, "too many requests")
```

**Status**: 429 Too Many Requests

**Details**:
```go
type TooManyRequestsDetails struct {
    RetryAfter int `json:"retry_after,omitempty" description:"Seconds until retry is allowed"`
}
```

### ErrInternalServer

```go
var ErrInternalServer = NewError[InternalServerDetails]("INTERNAL_SERVER_ERROR", 500, "internal server error")
```

**Status**: 500 Internal Server Error

**Details**:
```go
type InternalServerDetails struct {
    Reason string `json:"reason,omitempty" description:"Internal error context"`
}
```

### ErrNotImplemented

```go
var ErrNotImplemented = NewError[NotImplementedDetails]("NOT_IMPLEMENTED", 501, "not implemented")
```

**Status**: 501 Not Implemented

**Details**:
```go
type NotImplementedDetails struct {
    Feature string `json:"feature,omitempty" description:"Feature not implemented"`
}
```

### ErrServiceUnavailable

```go
var ErrServiceUnavailable = NewError[ServiceUnavailableDetails]("SERVICE_UNAVAILABLE", 503, "service unavailable")
```

**Status**: 503 Service Unavailable

**Details**:
```go
type ServiceUnavailableDetails struct {
    Reason string `json:"reason,omitempty" description:"Reason for unavailability"`
}
```

## Error Response Format

All errors serialize to:

```json
{
  "code": "ERROR_CODE",
  "message": "Human-readable message",
  "details": {
    // Optional typed details
  }
}
```

| Field | Type | Description |
|-------|------|-------------|
| `code` | string | Machine-readable error code |
| `message` | string | Human-readable message |
| `details` | object | Optional structured details (omitted if nil) |

## Usage Patterns

### Simple Error

```go
return Output{}, rocco.ErrNotFound
```

Response:
```json
{
  "code": "NOT_FOUND",
  "message": "not found"
}
```

### With Custom Message

```go
return Output{}, rocco.ErrNotFound.WithMessage("user not found")
```

Response:
```json
{
  "code": "NOT_FOUND",
  "message": "user not found"
}
```

### With Details

```go
return Output{}, rocco.ErrNotFound.WithDetails(rocco.NotFoundDetails{
    Resource: "user",
})
```

Response:
```json
{
  "code": "NOT_FOUND",
  "message": "not found",
  "details": {
    "resource": "user"
  }
}
```

### With Cause (for logging)

```go
return Output{}, rocco.ErrInternalServer.WithCause(err)
```

The cause is logged but not exposed to clients.

### Combined

```go
return Output{}, rocco.ErrConflict.
    WithMessage("email already registered").
    WithDetails(rocco.ConflictDetails{
        Reason: "email address is already in use",
    })
```

## See Also

- [Error Handling Guide](../3.guides/2.errors.md) - Error patterns
- [API Reference](1.api.md) - Complete API docs
